<html>

	<head>
		<link href='https://fonts.googleapis.com/css?family=Josefin+Sans' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
		<style>
		/* Rotate */
		.hvr-rotate {
		  display: inline-block;
		  vertical-align: middle;
		  -webkit-transition-duration: 0.5s;
		  transition-duration: 0.5s;
		  -webkit-transition-property: transform;
		  transition-property: transform;
		}
		.hvr-rotate:hover, .hvr-rotate:focus, .hvr-rotate:active {
		  -webkit-transform: rotate(360deg);
		  transform: rotate(360deg);
		}

		
		</style>
		<style type="text/css">
			html, body {
				margin:0;
				padding:0;
			}
			.bloco{ 
				float:left;
				width:52px;
				height:52px;
				margin:2px;			
				background-color:#14F161;
				display:table-cell;
				border-radius:6px;
				cursor:pointer;	
				z-index:1;
			}
			#container{
				position: absolute;
				width:1360px;
				height:660px;
				background-image:url("grid-bg.png");				
				display: inline-block;
				margin:2px;
				padding-left:2px;
				padding-top:2px;
				z-index:0;
			}
			#wrapper-menu{
				position:absolute;
				width:100%;
				height:100%;
				display:none;
				z-index:1;
			}
			#menu{
				width:15%;
				height:100%;
				background-color:black;
				float:left;
			}
			#outside{
				width:85%;
				height:100%;
				float:left;
			}
			#wrapper-menu-direita{
				position:absolute;
				width:100%;
				height:100%;
				display:none;
				z-index:1;
			}
			#menu-direita{
				width:15%;
				height:100%;
				background-color:black;
				float:left;
			}
			#outside-direita{
				width:85%;
				height:100%;
				float:left;
			}
			
			.botao, .bota-chevron{
				color:#DDDDDD;
				font-family: 'Source Code Pro', ;
				font-size:200%;
				font-weight: 700;
				text-align:center;
				text-decoration:none;
				width: 21.6777%;
				height:7%;
				margin-top:20px;
				margin-left:5%;
				background-color: #000000;
				border-radius: 10px;
				cursor:pointer;
				border:solid rgba(255, 255,255, 0.1) 2px;
				display:table;
				vertical-align:middle;
				float:left;
			}
			.botao:hover{
				background-color:#222222;
			}
			.botao-primeiro{
				margin-left:10%;
			}
			.botao-chevron{
				font-size:160%;
			}
			.formata{
				display:table-cell;
			}
			#div-cores{
				width:80%;
				margin-left:10%;
				margin-top:20px;
				height:10%;
				background-color:blue;
				border-radius:10px;
				border:solid rgba(255, 255,255, 0.1) 3px;
				cursor:pointer;
			}
			.invisivel{
				width:1px;
				height:1px;
				opacity:0;
			}
			h1,h3, #creditos{
				text-align:center;
				color:#6AF50E;
				font-family: 'Josefin Sans', sans-serif;
			}
			#creditos{
				position:absolute;
				height:5%;
				bottom:0%;
				margin-left:4%;
			}
			#menu-direita h1, h3{
				margin-left:20px;
			}
			.separador{
				width:90%;
				margin-left:5%;
				border-bottom: 2px solid rgba(255, 255,255, 0.5);
			}
		</style>
	
	<head>

	
	<body>
		<div id="wrapper-menu">
			<div id="menu">				
				<input type="hidden" value="" id="data-ativo" />
				<h1>Gridder</h1>
				<h3>*Bloco*</h3>
				<div class="separador"></div>
				<div id="div-cores"></div>
				<input type="color" id="color-picker" class="invisivel">
				<div id="mais-container" class="botao botao-primeiro">
					<span class="formata hvr-rotate"><a id="mais">+</a></span>
				</div>
				<div id="aumentar-direita" class="botao botao-chevron">
					<span class="formata hvr-rotate"><a id="direita-mais">></a></span>
				</div>
				<div id="aumentar-baixo" class="botao botao-chevron">
					<span class="formata hvr-rotate"><a id="baixo-mais">∨</a></span>
				</div>
				<div id="creditos">Rodrigo Zietlow</div>
			</div>
			<div id="outside"></div>
		</div>
		<div id="wrapper-menu-direita">
			
			<div id="outside-direita"></div>
			<div id="menu-direita">				
				<h1>Gridder</h1>
				<h3>*Grid*</h3>
				<div class="separador"></div>
				<div id="novo-bloco" class="botao botao-primeiro"><a >+</a></div>
			</div>
		</div>
		<div id='container' class="sortable">
		</div>
		
	</body>	
	
	<script src="https://code.jquery.com/jquery-2.1.4.js"></script>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/vader/jquery-ui.css">
	<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
	<script>
		$(document).ready(function(){
		
			//este hook é uma gamb, peguei do stackoverflow HEIAUEHIAUHAE
			//serve pra pegar hex em vez de rgb quando eu pegar com .css(background-color)
			$.cssHooks.backgroundColor = {
				get: function(elem) {
					if (elem.currentStyle)
						var bg = elem.currentStyle["backgroundColor"];
					else if (window.getComputedStyle)
						var bg = document.defaultView.getComputedStyle(elem,
							null).getPropertyValue("background-color");
					if (bg.search("rgb") == -1)
						return bg;
					else {
						bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
						function hex(x) {
							return ("0" + parseInt(x).toString(16)).slice(-2);
						}
						return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
					}
				}
			}
			
			//iniciar os sortables maravilhosos
			//$( ".sortable" ).sortable();
			//$( ".sortable" ).disableSelection();
			  
			//aqui os blocos ganham propriedades e mágica começa
			
			
			$("#container").delegate(".bloco", "click", function(e){
				e.stopPropagation();
				$(this).attr("data-nome", "novo nome");	
				console.log($(this).css("background-color"));
				$("#color-picker").val($(this).css("background-color"));
				$("#div-cores").css("background-color", $("#color-picker").val());
				$("#data-ativo").val($(this).attr("data-id"));
				$("#wrapper-menu").show("slide", { direction: "left", easing: "easeOutExpo" }, 700);
			});
			
			//menu da direita
			
			$("#container").click(function(e){
				console.log("cliquei no container?");
				$("#wrapper-menu-direita").show("slide", { direction: "right", easing: "easeOutExpo" }, 700);
			});
			// criar bloco//
			$("#outside-direita").click(function(){				
				$("#wrapper-menu-direita").hide("slide", { direction: "right", easing: "easeInExpo"  }, 700);
			});
			
			
			//cores man//
			
			$("#div-cores").click(function (){
				console.log("eu existo");
				$("#color-picker").click();
				
			});
			
			$("#color-picker").change(function(){
				$("#div-cores").css("background-color", $(this).val());
			});
			
			
			//efeitos ao sair do menu esquerdo//
			
			$("#outside").click(function(){
				var cor = $("#color-picker").val(),
					idOnde = $("#data-ativo").val();
				$("#data-ativo").val($(this).attr(""));	
				$(".bloco[data-id='" + idOnde + "']").css("background-color", cor);
				$("#wrapper-menu").hide("slide", { direction: "left", easing: "easeInExpo"  }, 700);
			});  
			
			// modelos e coisas// 
			var modelo = '<div class="bloco" data-id="###" data-tamanho="1"></div>',
				contador = 1;
			$("#novo-bloco").click(function(){
				var pronto = modelo.replace(/###/g, contador);
				contador += 1;
				$("#container").append(pronto);
				$("#outside-direita").click();
			});
			
			//aumentar um grid-lvl pra direita ou baixo//
			
			$("#direita-mais").click(function(){
				var idOnde = $("#data-ativo").val(),
					tamanho = $(".bloco[data-id="+idOnde+"]").width(),
					extra = 14; //aqui é o tamanho extra que será adicionado
				tamanho += extra;
				$(".bloco[data-id="+idOnde+"]").css("width", tamanho);
			});
			$("#baixo-mais").click(function(){
				var idOnde = $("#data-ativo").val(),
					tamanho = $(".bloco[data-id="+idOnde+"]").height(),
					extra = 14; //aqui é o tamanho extra que será adicionado
				tamanho += extra;
				$(".bloco[data-id="+idOnde+"]").css("height", tamanho);
			});
			
		});
	
	</script>
</html>
